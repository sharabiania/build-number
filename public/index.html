<!doctype html>
<html ng-app="App">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.4/angular.min.js"></script>
    <script>
        angular.module('App', [])
  .controller('buildsController', function($scope, $http) {
    var self = this;
    $scope.build = 0;
    self.setBuild = function(x){self.build = x;}
    $scope.bump = function(){
        console.log('ok');
        $http.post("http://localhost:1337/api/bump/com.sagomini.homework")
        .then($http.get('api/read/com.sagomini.homework').then(function(response){$scope.build = response}));
    }
    self.get = function() {
      var xhttp = new XMLHttpRequest();
      xhttp.open('GET', "http://localhost:1337/api/read/com.sagomini.homework");
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          var b = JSON.parse(this.responseText).build;
          $scope.$apply(function(){$scope.build = b;});
        }
      }      
      xhttp.send();
    }
    self.get();
    
});
    </script>
  </head>
  <body>
      
    <div ng-controller="buildsController as bc">
        <p ng-model="build">{{build}}</p>
  
  <button ng-click="bump()">Bump</button>
</div>
  </body>
</html>